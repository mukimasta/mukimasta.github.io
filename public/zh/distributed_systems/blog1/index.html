<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <!-- head.html --><!-- meta.html -->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distributed System Blog 01 â€“ Exactly-Once RPC | MUKIMASTA</title>
<meta name="author" content="[Mukii]">
<meta name="description" content="åœ¨ä¸å¯é ç½‘ç»œä¸Šå®ç° Exactly-Once RPC" >
<meta name="keywords" content="distributed_systems">
<link rel="canonical" href="http://localhost:1313/zh/distributed_systems/blog1/">



    
    <!-- twitterCard -->
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Distributed System Blog 01 â€“ Exactly-Once RPC | MUKIMASTA" />
    <meta name="twitter:description" content="åœ¨ä¸å¯é ç½‘ç»œä¸Šå®ç° Exactly-Once RPC" />
        <meta name="twitter:image" content="https://repository-images.githubusercontent.com/923527728/46a32a19-69ac-45b3-91a4-c4d299fb234b" />
    
    <!-- openGraph -->
    <meta property="og:title" content="Distributed System Blog 01 â€“ Exactly-Once RPC | MUKIMASTA" />
    <meta property="og:description" content="åœ¨ä¸å¯é ç½‘ç»œä¸Šå®ç° Exactly-Once RPC" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:1313/zh/distributed_systems/blog1/" />
        <meta property="og:image" content="https://repository-images.githubusercontent.com/923527728/46a32a19-69ac-45b3-91a4-c4d299fb234b" />
    <meta property="og:site_name" content="MUKIMASTA" />
    <!-- js.html -->


    <script src="http://localhost:1313/js/hugo-brewm.min.js" defer></script><!-- css.html -->


    <link rel="stylesheet" href="http://localhost:1313/css/hugo-brewm.min.css">



    
    <!-- css/inline.html -->
    <style>
         
        body {max-width: 786px; margin: auto; padding: 2rem;}
        img {max-width: 86vw;}
    </style>
    
</head>
<body>
    <!-- header.html -->
<header class="pagewidth">
    <div id="background-header" class="background" aria-hidden="true"></div>
    
    <nav aria-label="Bypass">
        <a id="to-content" href="#content" aria-label="Skip to Main Content">
            <span>Skip to Main Content</span>
            <kbd class="key" aria-hidden="true" data-key="c"></kbd>
            <span class="screening" aria-hidden="true"></span>
        </a>
    </nav>
    
    <!-- logo.html -->
    <div id="logo">
        <a href="http://localhost:1313/zh/" aria-label="MUKIMASTA" aria-description="Homepage"><svg id="logotype" xmlns="http://www.w3.org/2000/svg" version="1.1" width="252pt" aria-label="MUKIMASTA">
                        <text id="logotype__text" y="19.5pt" x="0">MUKIMASTA</text>
                    </svg>
        </a>
        <hr class="hide"/>
    </div>
    
    <details class="presentation" id="top-nav">
        <summary class="on-deck">
            <span class="t">Navigation</span>
            <span class="menu-icon" role="presentation"></span>
        </summary>
        <nav tabindex="-1" aria-label="Top">
            <!-- menu.html -->
    <details id="has-main-menu" class="presentation" open>
        <summary  class="hide"  aria-label="Main Menu">
            <span>Main Menu</span>
        </summary>
            
            <nav id="main-menu" aria-label="Main Menu">
                <ul class="l1   has-childfree " role="presentation" tabindex="-1" >
                    
    
        <li role="presentation" class="lfill textssc">
    <a   class=on-deck href=https://github.com/mukimasta rel=external noopener noreferrer nofollow target=_blank>
        
            <span>
                Github</span>
    </a>
        </li>
                </ul>
            </nav>
    </details>
            
            <!-- menu.html -->
            <!-- i18n.html -->
            <nav id="bi18n" aria-label="Language Selections">
                <a id="has-i18n" class="on-deck"
                    href="http://localhost:1313/"
                    aria-label="Switch Language to English"
                    aria-description="Current Language is Chinese">
                    <span class="emoji">ğŸ‡¬ğŸ‡§&nbsp;</span>
                    <span class="act iso639 sri" aria-hidden="true">ZH</span>
                    <span class="alt iso639 sri" aria-hidden="true">&rarr; EN</span>
                    <span class="t srt languangeName">English</span>
                </a>
            </nav>

        </nav>
        <div id="top-nav-screen" class="screening js-cpn" role="presentation" aria-hidden="true"></div>
        <hr class="hide"/>
    </details>
</header>
    
    <!-- [main] baseof.html -->
    <main id="page"class="post"
        >
        <!-- main/header.html -->
        <header class="pagewidth">
                    <menu id="menu" class="srm"
                        data-i18n-back="Go Back"
                        data-i18n-print="Print"
                        data-i18n-copy="Copy URL"
                        data-i18n-copying="Copying...">
                                <li>
                                    <a id="navigatorShare" href="#mastodon" role="button" aria-label="Share">
                                        <span class="t srt" role="tooltip">Share</span>
                                    </a>
                                </li>
                    </menu>
            <!-- nav.html -->
<details class="presentation" aria-expanded="true" id="has-breadcrumb" open>
    <summary id="breadcrumb" tabindex="-1">
        <span>Breadcrumb</span>
    </summary>
        <nav aria-labelledby="breadcrumb">
            <ul role="presentation" class="breadcrumb ">
                    <!-- breadcrumb.html -->
        <li>
            <a href="http://localhost:1313/zh/distributed_systems/" aria-current="true">Distributed_systems
            </a>
        </li>
    <li>
        <a href="" aria-current="page" tabindex="-1">Distributed System Blog 01 â€“ Exactly-Once RPC
        </a>
    </li>
            </ul>
        </nav>
</details>
            <hr class="hide"/>
        </header>
        <div id="top" role="presentation">
            
        </div>
        
    <article id="main-article" class="pagewidth rm"
        role="document" aria-labelledby="title"
            data-pagefind-body>
        <header aria-labelledby="title">
            <!-- title.html -->
        <h1 id="title"
                data-pagefind-meta="title"
            data-bionRead-safe
            >Distributed System Blog 01 â€“ Exactly-Once RPC</h1>
            <div id="doc-author" class="textsw"><span>[Mukii]</span>
            </div>
            <!-- timestamp.html-->
        <time datetime="2026-01-20T00:00:00&#43;00:00">2026å¹´1æœˆ20æ—¥</time>
        </header>
        <!-- audio.html -->
        <section id="content" class="content " aria-labelledby="title" data-bionRead-safe>
                <h1 id="distributed-system-blog-01--exactly-once-rpc">Distributed System Blog 01 â€“ Exactly-Once RPC</h1>
<p><strong>åœ¨ä¸å¯é ç½‘ç»œä¸Šå®ç° Exactly-Once RPC</strong></p>
<h2 id="0--å‰è¨€">0  å‰è¨€</h2>
<h3 id="01--åˆ†å¸ƒå¼ç³»ç»Ÿ">0.1  åˆ†å¸ƒå¼ç³»ç»Ÿ</h3>
<p>æˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿï¼š</p>
<ul>
<li>æ‰“å¼€å¾®ä¿¡ â†’  ä½ çš„æ‰‹æœºè¿æ¥åˆ°è…¾è®¯çš„æœåŠ¡å™¨</li>
<li>åˆ·æŠ–éŸ³     â†’  è§†é¢‘ä»å­—èŠ‚çš„æœåŠ¡å™¨ä¼ ç»™ä½ </li>
<li>ç½‘è´­         â†’  è®¢å•ä¿¡æ¯å­˜åœ¨é˜¿é‡Œçš„æ•°æ®åº“é‡Œ</li>
</ul>
<p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿ = å¤šä¸ªç‹¬ç«‹è®¡ç®—èŠ‚ç‚¹é€šè¿‡ç½‘ç»œåä½œå®ç°å…±åŒçš„ç›®æ ‡</strong></p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ</strong></p>
<ul>
<li>å•æœºè£…ä¸ä¸‹ï¼š Facebook æœ‰ 30 äº¿ç”¨æˆ·ï¼Œä¸€å°æœºå™¨å­˜ä¸ä¸‹æ‰€æœ‰æ•°æ®</li>
<li>å•æœºæ‰›ä¸ä½ï¼š åŒåä¸€æ¯ç§’å‡ åä¸‡è®¢å•ï¼Œä¸€å°æœºå™¨å¤„ç†ä¸è¿‡æ¥</li>
<li>å•æœºä¼šæŒ‚æ‰ï¼š æœåŠ¡å™¨ä¼šåï¼Œç¡¬ç›˜ä¼šçƒ§ï¼Œéœ€è¦å¤‡ä»½</li>
</ul>
<p>ä½†å¤šå°æœºå™¨å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼šå®ƒä»¬ä¹‹é—´å¦‚ä½•é€šè¿‡ç½‘ç»œé€šä¿¡åä½œï¼Ÿ</p>
<h3 id="02--remote-procedure-call-rpc">0.2  Remote Procedure Call (RPC)</h3>
<p>ä½ å¹³æ—¶ç”¨ appï¼š</p>
<pre tabindex="0"><code>ç‚¹å‡»æœ‹å‹å¤´åƒ â†’ çœ‹åˆ°ä¸ªäººèµ„æ–™
åˆ·æ–°æœ‹å‹åœˆ â†’ çœ‹åˆ°æœ€æ–°åŠ¨æ€
å‘é€æ¶ˆæ¯ â†’ å¯¹æ–¹æ”¶åˆ°
</code></pre><p>è¿™äº›æ“ä½œèƒŒåå°±åƒè°ƒç”¨äº†ä¸€ä¸ªè¿œç¨‹å‡½æ•°ã€‚</p>
<p>æƒ³è±¡ä½ åœ¨å†™ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># æœ¬åœ°å‡½æ•°è°ƒç”¨</span>
</span></span><span class="line"><span class="cl"><span class="n">profile</span> <span class="o">=</span> <span class="n">get_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
</span></span></code></pre></div><p>è¿™ä¸ªå‡½æ•°åœ¨ä½ çš„ç¨‹åºé‡Œæ‰§è¡Œï¼Œè¯»å–æœ¬åœ°å†…å­˜çš„æ•°æ®ã€‚</p>
<p>ä½†å¦‚æœæ•°æ®åœ¨å¦ä¸€å°æœºå™¨ä¸Šå‘¢ï¼Ÿ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># è¿œç¨‹å‡½æ•°è°ƒç”¨ï¼ˆRPCï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="n">profile</span> <span class="o">=</span> <span class="n">remote_get_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
</span></span></code></pre></div><p>è¿™ä¸ªå‡½æ•°ï¼š</p>
<ol>
<li>æŠŠè¯·æ±‚é€šè¿‡ç½‘ç»œå‘ç»™æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨æ‰§è¡Œå‡½æ•°</li>
<li>æŠŠç»“æœé€šè¿‡ç½‘ç»œå‘å›æ¥</li>
</ol>
<p>çœ‹èµ·æ¥åªæ˜¯åŠ äº†ä¸ª &ldquo;remote&rdquo;ï¼Œä½†åŠ å…¥äº†ç½‘ç»œï¼Œä¸€åˆ‡éƒ½å˜äº†ã€‚</p>
<h3 id="03--ä¸€ä¸ªè½¬è´¦çš„æ•…äº‹">0.3  ä¸€ä¸ªè½¬è´¦çš„æ•…äº‹</h3>
<p>æƒ³è±¡è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre tabindex="0"><code>ä½ æ‰“å¼€æ‰‹æœº appï¼Œç»™æœ‹å‹è½¬è´¦ 100 å…ƒ
ç‚¹å‡»&#34;ç¡®è®¤è½¬è´¦&#34;
loading...
loading...
10 ç§’è¿‡å»äº†ï¼Œè¿˜åœ¨ loading
</code></pre><p>ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<ul>
<li>å†ç‚¹ä¸€æ¬¡ï¼Ÿä¸‡ä¸€ç¬¬ä¸€æ¬¡æˆåŠŸäº†å‘¢ï¼Ÿé‚£å°±è½¬äº† 200 å…ƒ</li>
<li>æ”¾å¼ƒï¼Ÿä¸‡ä¸€æ ¹æœ¬æ²¡è½¬æˆåŠŸå‘¢ï¼Ÿ</li>
<li>ç­‰ç€ï¼Ÿç­‰åˆ°ä»€ä¹ˆæ—¶å€™ï¼Ÿ</li>
</ul>
<p><strong>è¿™å°±æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒå›°å¢ƒï¼šç½‘ç»œæ˜¯ä¸å¯é çš„</strong></p>
<h3 id="04--ç½‘ç»œæœ‰å¤šä¸å¯é ">0.4  ç½‘ç»œæœ‰å¤šä¸å¯é ï¼Ÿ</h3>
<p>å‘é€&quot;è½¬è´¦ 100 å…ƒ&quot;åï¼Œæ²¡æ”¶åˆ°å›å¤ã€‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre tabindex="0"><code>æƒ…å†µ1ï¼šè¯·æ±‚åœ¨è·¯ä¸Šä¸¢äº†
Client ----X---&gt; Server
(Server æ ¹æœ¬æ²¡æ”¶åˆ°)

æƒ…å†µ2ï¼šServer æ‰§è¡Œäº†ï¼Œä½†å›å¤ä¸¢äº†
Client --------&gt; Server âœ”ï¸
Client &lt;---X---- Server
(é’±è½¬äº†ï¼Œä½†ä½ ä¸çŸ¥é“)

æƒ…å†µ3ï¼šç½‘ç»œå¾ˆæ…¢
Client ----ğŸ˜´---&gt; Server ğŸ•’
(è¿˜åœ¨è·¯ä¸Šï¼Œçœ‹èµ·æ¥åƒä¸¢äº†)
</code></pre><p><strong>å…³é”®å›°å¢ƒï¼šä½ æ— æ³•åŒºåˆ†è¿™äº›æƒ…å†µï¼Œä¹Ÿæ— æ³•ä¿è¯æ¶ˆæ¯åˆ°è¾¾çš„é¡ºåºã€‚</strong></p>
<h3 id="05--æˆ‘ä»¬çš„ç›®æ ‡exactly-once-rpc">0.5  æˆ‘ä»¬çš„ç›®æ ‡ï¼šExactly-Once RPC</h3>
<p>ä¸ç®¡ç½‘ç»œç¯å¢ƒå¦‚ä½•ï¼Œæˆ‘ä»¬æƒ³è¦ä¿è¯ï¼šæ¯ä¸ªæ“ä½œæ°å¥½æ‰§è¡Œä¸€æ¬¡ï¼ˆExactly-Onceï¼‰ã€‚</p>
<p>â€œExactly-Onceâ€æ€ä¹ˆå®ç°ï¼Ÿ</p>
<p><strong>Exactly-Once = At-Least-Once + At-Most-Once</strong></p>
<p>æ‹†å¼€æ¥çœ‹ï¼š</p>
<ul>
<li><strong>ä¸èƒ½æ˜¯ 0 æ¬¡</strong> â†’ è‡³å°‘æ‰§è¡Œ 1 æ¬¡ï¼ˆAt-Least-Onceï¼‰</li>
<li><strong>ä¸èƒ½æ˜¯ 2+ æ¬¡</strong> â†’ è‡³å¤šæ‰§è¡Œ 1 æ¬¡ï¼ˆAt-Most-Onceï¼‰</li>
</ul>
<h2 id="1--at-least-once-rpc">1  At-Least-Once RPC</h2>
<p>æˆ‘ä»¬å…ˆæ¥å®ç° At-Least-Once RPCï¼Œä¹Ÿå°±æ˜¯å…ˆä¿è¯æ¯ä¸ªæ“ä½œè¢« Server è‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸” Client æ€»ä¼šæ”¶åˆ°æ‰§è¡Œç»“æœã€‚</p>
<p>At-Least-Once åœ¨ Client å±‚çº§ä¸Šå®ç°ã€‚</p>
<h3 id="11--é‡è¯•æœºåˆ¶">1.1  é‡è¯•æœºåˆ¶</h3>
<p>æˆ‘ä»¬å…ˆæ¥è§£å†³ç¬¬ä¸€ç§æƒ…å†µï¼šè¯·æ±‚å¯èƒ½ä¸¢å¤±ï¼Œä¹Ÿå°±æ˜¯ Server æ²¡æœ‰æ”¶åˆ°è¯·æ±‚ï¼š</p>
<pre tabindex="0"><code>  Client    ----X---&gt;    Server
è½¬è´¦ 100 å…ƒ  (ç½‘ç»œä¸¢åŒ…)  (æ ¹æœ¬æ²¡æ”¶åˆ°)

ç»“æœ: 0 æ¬¡æ‰§è¡Œ
</code></pre><p>æ€ä¹ˆåŠï¼Ÿ</p>
<p>ä¸€ä¸ªå¾ˆç›´è§‰çš„æƒ³æ³•æ˜¯ï¼šé‡è¯•</p>
<p>æˆ‘ä»¬æ¯é—´éš”ä¸€æ®µæ—¶é—´ï¼Œå°±é‡æ–°å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œç›´åˆ°æˆåŠŸæ”¶åˆ°å›å¤ä¸ºæ­¢ã€‚</p>
<pre tabindex="0"><code>  Client    ----X---&gt;    Server
è½¬è´¦ 100 å…ƒ  (ç½‘ç»œä¸¢åŒ…)  (æ ¹æœ¬æ²¡æ”¶åˆ°)

  Client    --------&gt;    Server
è½¬è´¦ 100 å…ƒ    (é‡è¯•)    (æˆåŠŸæ‰§è¡Œ)

  Client    &lt;--------    Server
 (æ”¶åˆ°å›å¤)              (å›å¤ç»“æœ)

ç»“æœ: 1 æ¬¡æ‰§è¡Œ
</code></pre><p>çœ‹èµ·æ¥å¾ˆåˆç†ï¼Œä½†æ˜¯ï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>è€ƒè™‘è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre tabindex="0"><code>æ—¶åˆ» T1: Client å‘é€ &#34;è½¬è´¦ 100&#34;
æ—¶åˆ» T2: (è¶…æ—¶ï¼Œæ²¡å›å¤)
æ—¶åˆ» T3: Client é‡è¯•ï¼Œå†æ¬¡å‘é€ &#34;è½¬è´¦ 100&#34;
æ—¶åˆ» T4: Server å›å¤ &#34;æˆåŠŸ&#34;
æ—¶åˆ» T5: Client å‘é€æ–°å‘½ä»¤ &#34;æŸ¥è¯¢ä½™é¢&#34;
æ—¶åˆ» T6: Server å›å¤ &#34;æˆåŠŸ&#34;

é—®é¢˜: è¿™ä¸ª &#34;æˆåŠŸ&#34; æ˜¯å“ªä¸ªå‘½ä»¤çš„å›å¤ï¼Ÿ
- è½¬è´¦çš„å›å¤ï¼Ÿ
- æŸ¥è¯¢ä½™é¢çš„å›å¤ï¼Ÿ
</code></pre><p>å¦‚æœ Client è¯¯ä»¥ä¸º&quot;æˆåŠŸ&quot;æ˜¯&quot;æŸ¥è¯¢ä½™é¢&quot;çš„å›å¤ï¼Œä½†å…¶å®æ˜¯ç¬¬ä¸€æ¬¡&quot;è½¬è´¦&quot;çš„å»¶è¿Ÿå›å¤ï¼Œç³»ç»Ÿå°±ä¹±äº†ã€‚</p>
<p><strong>é—®é¢˜æœ¬è´¨ï¼šå›å¤å’Œè¯·æ±‚å¤±å»äº†å¯¹åº”å…³ç³»ã€‚</strong></p>
<h3 id="12--requestid-è¯·æ±‚æ ‡è¯†">1.2  RequestID è¯·æ±‚æ ‡è¯†</h3>
<p>æ€ä¹ˆå»ºç«‹å¯¹åº”å…³ç³»ï¼Ÿç»™æ¯ä¸ªè¯·æ±‚æ‰“æ ‡ç­¾ã€‚</p>
<p>æ ‡ç­¾éœ€è¦æ»¡è¶³ï¼š</p>
<ul>
<li>é‡è¯•æ—¶ä¿æŒä¸å˜ï¼ˆè¿™æ ·æ‰çŸ¥é“æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼‰</li>
<li>æ–°å‘½ä»¤æ—¶æ”¹å˜ï¼ˆè¿™æ ·æ‰èƒ½åŒºåˆ†ä¸åŒè¯·æ±‚ï¼‰</li>
</ul>
<p><strong>è‡ªç„¶çš„é€‰æ‹©ï¼šé€’å¢çš„ request_id</strong></p>
<pre tabindex="0"><code>Client ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨:
request_id = 0

å‘é€æ–°å‘½ä»¤:
  request_id += 1
  å‘é€ (request_id, command)

é‡è¯•æ—¶:
  å‘é€ç›¸åŒçš„ (request_id, command)
  (request_id ä¸å˜ï¼)
</code></pre><p>Server çš„å›å¤ä¹Ÿå¿…é¡»å¸¦ä¸Š request_idï¼Œå¦åˆ™ Client æ— æ³•åŒ¹é…ã€‚</p>
<p>å…·ä½“åœºæ™¯ï¼š</p>
<pre tabindex="0"><code>T1: Client å‘é€ (request_id=1, &#34;è½¬è´¦ 100&#34;)
T2: (è¶…æ—¶ï¼Œå‡†å¤‡é‡è¯•) 
T3: Client å‘é€ (request_id=1, &#34;è½¬è´¦ 100&#34;)  â† ID ä¸å˜
T4: Server å›å¤ (request_id=1, &#34;æˆåŠŸ&#34;)
T5: Client å‘é€ (request_id=2, &#34;æŸ¥è¯¢ä½™é¢&#34;) â† ID é€’å¢
T6: Server å›å¤ (request_id=1, &#34;æˆåŠŸ&#34;)

Client æ£€æŸ¥: request_id=1 â‰  å½“å‰çš„ request_id=2
â†’ è¿™æ˜¯æ—§å›å¤ï¼Œå¿½ç•¥
â†’ ç»§ç»­ç­‰å¾… request_id=2 çš„å›å¤
</code></pre><p>å®Œæ•´çš„æ¶ˆæ¯æ ¼å¼ï¼š</p>
<pre tabindex="0"><code>Request:
  request_id: ç¬¬å‡ ä¸ªè¯·æ±‚
  command:    è¦æ‰§è¡Œä»€ä¹ˆ

Reply:
  request_id: å›å¤å“ªä¸ªè¯·æ±‚
  result:     æ‰§è¡Œç»“æœ
</code></pre><h3 id="13--at-least-once-çš„å®Œæ•´é€»è¾‘">1.3  At-Least-Once çš„å®Œæ•´é€»è¾‘ï¼š</h3>
<pre tabindex="0"><code>Client çš„çŠ¶æ€:
- current_request_id: å½“å‰è¯·æ±‚çš„ ID
- current_command:    å½“å‰è¯·æ±‚çš„å‘½ä»¤
- timer:              é‡è¯•å®šæ—¶å™¨

å‘é€æ–°å‘½ä»¤:
  current_request_id += 1
  current_command = command
  å‘é€ Request(current_request_id, command)
  å¯åŠ¨ timer

æ”¶åˆ°å›å¤ Reply(reply_request_id, result):
  if reply_request_id == current_request_id:
      åœæ­¢ timer
      è¿”å› result
  else:
      å¿½ç•¥ (è¿™æ˜¯æ—§è¯·æ±‚çš„å›å¤)

Timer è¶…æ—¶:
  é‡å‘ Request(current_request_id, current_command)
  é‡å¯ timer
</code></pre><p><strong>è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº† At-Least-Onceï¼šåªè¦ Client ä¸åœé‡è¯•ï¼Œè¯·æ±‚æœ€ç»ˆä¼šåˆ°è¾¾å¹¶æ‰§è¡Œï¼ŒClient æœ€ç»ˆä¼šæ”¶åˆ°å›å¤ã€‚</strong></p>
<h2 id="2--at-most-once-rpc">2  At-Most-Once RPC</h2>
<p>Client é‡è¯•ä¼šå¯¼è‡´ Server æ”¶åˆ°å¤šä¸ªç›¸åŒçš„è¯·æ±‚ã€‚æˆ‘ä»¬å³å°†å®ç°çš„ At-Most-Once éœ€è¦ä¿è¯æ¯ä¸ªè¯·æ±‚åªè¢«æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<p>At-Most-Once åœ¨ Server å±‚çº§ä¸Šå®ç°ã€‚</p>
<h3 id="21--å»é‡æœºåˆ¶">2.1  å»é‡æœºåˆ¶</h3>
<p>Server æ€ä¹ˆçŸ¥é“è¿™æ˜¯é‡å¤è¯·æ±‚ï¼Ÿ</p>
<p>ç”¨æˆ‘ä»¬å·²æœ‰çš„ä¸œè¥¿ï¼š<strong>request_id</strong></p>
<pre tabindex="0"><code>Server ç»´æŠ¤ä¸€ä¸ªè®°å½•:
seen = {1, 2, 5, 7, ...}

æ”¶åˆ°è¯·æ±‚ Request(request_id, command):
  if request_id in seen:
      è¿™æ˜¯é‡å¤è¯·æ±‚
      ...
  else:
      è¿™æ˜¯æ–°è¯·æ±‚
      ...
</code></pre><p>å¯¹äºå¤šä¸ª Client çš„æƒ…å†µï¼š</p>
<p>Server çš„è®°å½•çš„ Key å˜æˆ (client_id, request_id)ï¼š</p>
<p>åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œæ¯ä¸ªæ¶ˆæ¯å¤©ç„¶å°±å¸¦æœ‰å‘é€è€…çš„åœ°å€ï¼ˆaddressï¼‰ã€‚æˆ‘ä»¬ç›´æ¥ç”¨è¿™ä¸ªåœ°å€ä½œä¸º client_id å³å¯ã€‚</p>
<p>æ‰€ä»¥ä¸€ä¸ªè¯·æ±‚çš„å®Œæ•´çš„å”¯ä¸€æ ‡è¯†æ˜¯ï¼š(client_id, request_id)ï¼Œè¿™ä¹Ÿæ˜¯åœ¨ Server å±‚è¦ç»´æŠ¤çš„è®°å½•ã€‚
å…¶ä¸­ï¼š</p>
<ul>
<li><strong>client_id</strong>ï¼šç”±ç½‘ç»œæ¡†æ¶æä¾›ï¼ˆå‘é€è€…çš„åœ°å€ï¼‰</li>
<li><strong>request_id</strong>ï¼šç”±æˆ‘ä»¬çš„åº”ç”¨å±‚ç»´æŠ¤ï¼ˆé€’å¢åºåˆ—å·ï¼‰</li>
</ul>
<h3 id="22--è¯·æ±‚--ç»“æœ-æ˜ å°„è¡¨">2.2  è¯·æ±‚ â†’ ç»“æœ æ˜ å°„è¡¨</h3>
<p>åœ¨æ¥æ”¶åˆ°é‡å¤è¯·æ±‚åï¼Œè¦æ€ä¹ˆåšï¼Ÿ</p>
<pre tabindex="0"><code>T1: Client å‘é€ Request(request_id=1, command)
    Server æ‰§è¡Œï¼Œå›å¤ä¸¢å¤±

T2: Client é‡è¯•ï¼Œå‘é€ Request(request_id=1, command)
    Server å‘ç°: ä¹‹å‰è§è¿‡ (client_id, 1)
    ç„¶åå‘¢ï¼Ÿ
</code></pre><p>Server ä¸èƒ½ï¼š</p>
<ul>
<li>é‡æ–°æ‰§è¡Œ â†’ è¿å at-most-once</li>
<li>ä¸å›å¤ â†’ Client ä¼šä¸€ç›´ç­‰</li>
</ul>
<p><strong>Server å¿…é¡»ï¼šè¿”å›ä¹‹å‰çš„ç»“æœ</strong></p>
<p>å¯¹äºæ¯ä¸ªè¯·æ±‚ (client_id, request_id)ï¼Œä¿å­˜å¯¹åº”çš„ç»“æœã€‚</p>
<p><strong>HashMap: (client_id, request_id) -&gt; Result</strong></p>
<p>ä½¿ç”¨ä¸€ä¸ªâ€œè¯·æ±‚ â†’ ç»“æœâ€æ˜ å°„è¡¨ï¼Œæ”¶åˆ°æ—§è¯·æ±‚æ—¶è¿”å›å³å¯ã€‚</p>
<p>Server ä¸èƒ½æ— é™ä¿å­˜å†å²ã€‚</p>
<h3 id="23--å•è¯·æ±‚å‡è®¾ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶">2.3  å•è¯·æ±‚å‡è®¾ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶</h3>
<p>Client å•è¯·æ±‚å‡è®¾ï¼šClient åœ¨æœªæ”¶åˆ°å½“å‰è¯·æ±‚çš„å›å¤ä¹‹å‰ä¸ä¼šè¯·æ±‚æ–°å‘½ä»¤ã€‚</p>
<pre tabindex="0"><code>Client çš„è¡Œä¸º:
å‘é€ req=1 â†’ ç­‰å›å¤ â†’ æ”¶åˆ°
å‘é€ req=2 â†’ ç­‰å›å¤ â†’ æ”¶åˆ°
å‘é€ req=3 â†’ ...
</code></pre><p>åœ¨æ­¤æƒ…å†µä¸‹ï¼š</p>
<pre tabindex="0"><code>Client å‘é€äº† request_id=N+1
â†’ è¯´æ˜å®ƒå·²ç»æ”¶åˆ°äº† request_idâ‰¤N çš„å›å¤
â†’ Server å¯ä»¥ä¸¢å¼ƒ request_idâ‰¤N çš„è®°å½•
</code></pre><p>æ‰€ä»¥åªéœ€ä¿å­˜æœ€åä¸€ä¸ªï¼š</p>
<pre tabindex="0"><code>history = {
  client_A: (last_id, last_result),
  client_B: (last_id, last_result),
}

æ”¶åˆ°æ–°è¯·æ±‚ N:
  history[client_id] = (N, result)
  // è‡ªåŠ¨è¦†ç›–æ—§çš„ï¼Œåªä¿ç•™æœ€æ–°
</code></pre><p><strong>HashMap: client_id -&gt; (request_id, Result)</strong></p>
<h3 id="24--at-most-once-çš„å®Œæ•´é€»è¾‘">2.4  At-Most-Once çš„å®Œæ•´é€»è¾‘</h3>
<pre tabindex="0"><code>Server çš„çŠ¶æ€:
- history: map[client_id â†’ (last_request_id, last_result)]

æ”¶åˆ°è¯·æ±‚ Request(request_id, command) æ¥è‡ª client_id:
  
  record = history.get(client_id)
  
  if record ä¸å­˜åœ¨:
      // ç¬¬ä¸€æ¬¡è§åˆ°è¿™ä¸ª Client
      result = execute(command)
      history[client_id] = (request_id, result)
      å‘é€ Reply(request_id, result)
      return
  
  if request_id &lt;= record.last_request_id:
      // é‡å¤æˆ–ä¹±åºçš„æ—§è¯·æ±‚
      å‘é€ Reply(request_id, record.last_result)
      return
  
  // æ–°è¯·æ±‚ (request_id &gt; last_request_id)
  result = execute(command)
  history[client_id] = (request_id, result)  // è¦†ç›–æ—§è®°å½•
  å‘é€ Reply(request_id, result)
</code></pre><h2 id="3--exactly-once-rpc-å®Œæ•´æ¶æ„">3  Exactly-Once RPC å®Œæ•´æ¶æ„</h2>
<pre tabindex="0"><code>Client èŠ‚ç‚¹                    Server èŠ‚ç‚¹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Retry Logic  â”‚   Command    â”‚ AMOApplication â”‚
â”‚    (ALO)     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚     (AMO)      â”‚
â”‚              â”‚    Result    â”‚       â†“        â”‚
â”‚              â”‚  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  Application   â”‚
â”‚              â”‚              â”‚   (business)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre><p>è¯¦ç»†ç‰ˆæœ¬ï¼š</p>
<pre tabindex="0"><code>Client Node                              Server Node
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Retry Logic (ALO impl)  â”‚             â”‚ AMOApplication (AMO impl)â”‚
â”‚                         â”‚             â”‚                          â”‚
â”‚ â€¢ request_id: 1,2,3...  â”‚  Command    â”‚ â€¢ Dedup check:           â”‚
â”‚ â€¢ Timer: retry timeout  â”‚  +request_idâ”‚   req_id &lt;= last_req_id? â”‚
â”‚ â€¢ Match reply: ID match?â”‚             â”‚                          â”‚
â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ â€¢ Save history:          â”‚
â”‚                         â”‚             â”‚   map[client_idâ†’         â”‚
â”‚                         â”‚             â”‚       (req_id, result)]  â”‚
â”‚                         â”‚  Result     â”‚                          â”‚
â”‚                         â”‚  +request_idâ”‚   â†“ if new request       â”‚
â”‚ Match â†’ stop retry      â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                          â”‚
â”‚                         â”‚             â”‚ Application (Business)   â”‚
â”‚                         â”‚             â”‚ â€¢ Get/Put/Append         â”‚
â”‚                         â”‚             â”‚ â€¢ Transfer/Query         â”‚
â”‚                         â”‚             â”‚ â€¢ ... (any business)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                                         â†‘
client_id provided by network          Get client_id from message
framework (sender address)             (sender address)
</code></pre><p><strong>Server å†…éƒ¨åˆ†å±‚ï¼ˆæ€ä¹ˆåšï¼‰</strong></p>
<pre tabindex="0"><code>Server å†…éƒ¨:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AMOApplication     â”‚ â† å»é‡å±‚
â”‚      (åŒ…è£…)          â”‚   åªå…³å¿ƒ request_id
â”‚                     â”‚   ä¸å…³å¿ƒä¸šåŠ¡é€»è¾‘
â”‚        â†“            â”‚
â”‚  Application        â”‚ â† ä¸šåŠ¡å±‚
â”‚   (å…·ä½“ä¸šåŠ¡)          â”‚   åªå…³å¿ƒä¸šåŠ¡é€»è¾‘
â”‚  â€¢ KVStore          â”‚   ä¸å…³å¿ƒå»é‡
â”‚  â€¢ GameServer       â”‚
â”‚  â€¢ ShoppingCart     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre><h2 id="4--æ‹“å±•å»¶ä¼¸">4  æ‹“å±•å»¶ä¼¸</h2>
<p>ä¸æ˜¯æ‰€æœ‰æ“ä½œéƒ½æ€•é‡å¤</p>
<h3 id="41--side-effect-å’Œ-idempotence">4.1  Side Effect å’Œ Idempotence</h3>
<p><strong>Side Effect = æ”¹å˜ç³»ç»ŸçŠ¶æ€çš„æ“ä½œ</strong></p>
<pre tabindex="0"><code>æ— å‰¯ä½œç”¨ (è¯»æ“ä½œ):
- GET(key)          - åªè¯»ï¼Œä¸æ”¹å˜çŠ¶æ€
- QUERY_BALANCE()   - åªè¯»ï¼Œä¸æ”¹å˜çŠ¶æ€

æœ‰å‰¯ä½œç”¨ (å†™æ“ä½œ):
- PUT(key, value)   - ä¿®æ”¹çŠ¶æ€
- TRANSFER(amount)  - ä¿®æ”¹çŠ¶æ€
- APPEND(key, val)  - ä¿®æ”¹çŠ¶æ€
</code></pre><p>å¦‚æœæ“ä½œæœ‰å‰¯ä½œç”¨ï¼Œé‡å¤æ‰§è¡Œå¯èƒ½äº§ç”Ÿé”™è¯¯çš„ç»“æœã€‚</p>
<p><strong>Idempotenceï¼ˆå¹‚ç­‰æ€§ï¼‰= æ‰§è¡Œå¤šæ¬¡å’Œæ‰§è¡Œä¸€æ¬¡çš„æ•ˆæœç›¸åŒ</strong></p>
<pre tabindex="0"><code>å¹‚ç­‰æ“ä½œ:
- GET(key)            - è¯»å¤šæ¬¡ç»“æœä¸€æ ·
- PUT(key, &#34;value&#34;)   - è®¾ç½®æˆå›ºå®šå€¼ï¼Œé‡å¤è®¾ç½®è¿˜æ˜¯é‚£ä¸ªå€¼
- DELETE(key)         - åˆ é™¤ï¼ˆåˆ é™¤å·²åˆ é™¤çš„ = è¿˜æ˜¯åˆ é™¤ï¼‰

éå¹‚ç­‰æ“ä½œ:
- APPEND(key, value)  - æ¯æ¬¡è¿½åŠ ï¼Œè¶Šæ¥è¶Šé•¿
- INCREMENT(counter)  - æ¯æ¬¡åŠ  1ï¼Œè¶Šæ¥è¶Šå¤§
- TRANSFER(amount)    - æ¯æ¬¡æ‰£é’±ï¼Œè¶Šæ¥è¶Šå°‘
</code></pre><p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong></p>
<p>å¦‚æœæ“ä½œæ˜¯å¹‚ç­‰çš„ï¼Œç³»ç»Ÿå¯ä»¥ç®€åŒ–ï¼š</p>
<pre tabindex="0"><code>Client: ä¸ç¡®å®šæ˜¯å¦æˆåŠŸï¼Ÿç›´æ¥é‡è¯•å°±è¡Œ
Server: é‡å¤æ‰§è¡Œä¹Ÿæ²¡äº‹
â†’ ä¸éœ€è¦å¤æ‚çš„ AMO æœºåˆ¶ï¼Œat-least-once å°±å¤Ÿäº†
</code></pre><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ DNSã€NFS ç­‰ç³»ç»Ÿèƒ½ç”¨ç®€å•çš„ at-least-onceã€‚</p>
<h3 id="42-æˆ‘ä»¬çš„æ–¹æ¡ˆé€‚ç”¨èŒƒå›´">4.2 æˆ‘ä»¬çš„æ–¹æ¡ˆé€‚ç”¨èŒƒå›´</h3>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>éå¹‚ç­‰æ“ä½œï¼ˆéœ€è¦ AMO ä¿æŠ¤ï¼‰
<ul>
<li>APPENDã€INCREMENTã€TRANSFER ç­‰</li>
</ul>
</li>
<li>Client å•è¯·æ±‚æ¨¡å¼ï¼ˆåƒåœ¾å›æ”¶ä¾èµ–è¿™ä¸ªå‡è®¾ï¼‰
<ul>
<li>ä¸€ä¸ª Client ä¸€æ¬¡åªå‘ä¸€ä¸ªè¯·æ±‚</li>
</ul>
</li>
<li>æœ‰çŠ¶æ€æœåŠ¡ï¼ˆéœ€è¦è®°ä½å†å²ï¼‰
<ul>
<li>éœ€è¦æŒä¹…åŒ–å­˜å‚¨çš„æœåŠ¡</li>
</ul>
</li>
</ul>
<h2 id="5--ç»“è¯­">5  ç»“è¯­</h2>
<p>Lab 1 çœ‹èµ·æ¥å¾ˆç®€å•ï¼šå®ç°ä¸€ä¸ª RPCã€‚</p>
<p>ä½†å®ƒæ­ç¤ºäº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒæŒ‘æˆ˜ï¼š<strong>å¦‚ä½•åœ¨ä¸ç¡®å®šæ€§ä¸­æ„å»ºç¡®å®šæ€§ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬çš„ç­”æ¡ˆä¸æ˜¯æ¶ˆé™¤ä¸ç¡®å®šæ€§ï¼ˆåšä¸åˆ°ï¼‰ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ‰¿è®¤ç½‘ç»œä¸å¯é </li>
<li>åˆ†è§£é—®é¢˜ï¼ˆexactly-once = at-least + at-mostï¼‰</li>
<li>åˆ†å±‚è®¾è®¡ï¼ˆClient é‡è¯• + Server å»é‡ï¼‰</li>
<li>åˆ©ç”¨å‡è®¾ï¼ˆå•è¯·æ±‚ â†’ åƒåœ¾å›æ”¶æœºåˆ¶ï¼‰</li>
<li>ç”¨ç®€å•æœºåˆ¶ç»„åˆæˆå¤æ‚ä¿è¯</li>
</ul>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ª Lab çš„è§£æ³•ï¼Œæ›´æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬å“²å­¦ã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼šLab 2 ä¼šå¼•å…¥ Primary-Backupï¼Œåœ¨ä¸å¯é çš„æœåŠ¡å™¨ä¸Šå®ç°å¯é çš„æœåŠ¡ã€‚</p>

        </section>
            
    <nav id="keywords" aria-label="Tags">
        <span>Tag:&nbsp;</span>
        
        <!-- terms.html -->
            <ul class="inline" role="presentation">
                    <li><a href="/zh/tags/distributed_systems/" >Distributed_systems</a></li>
            </ul>
    </nav>
    </article>
        <div id="exclude" role="presentation">
            <!-- excluded last block frome some RSS reader and browser reader mode -->
            
    <div class="pagewidth">
        <hr />
        <div id="contentinfo" role="contentinfo" data-pagefind-ignore="all">
                    <!-- related.html -->
                    <!-- colophon.html -->
    <div id="colophon" style="display: none;" aria-live="polite">
        <strong class="section-title">Colophon</strong>
        <div>
            <div id="qr" role="img" aria-label="QR code"></div>
            <div class="verbose">
                <div class="has-aria-label-top" aria-label="Distributed System Blog 01 â€“ Exactly-Once RPC"><span>http://localhost:1313/zh/distributed_systems/blog1/</span></div>
                <div><span>This page is built on: </span><time datetime="2026-01-27T00:03:30-08:00">2026-01-27 00:03</time></div>
                <div><span>This page is accessed on: </span><time id="time-stamp"></time></div><div><span>Powered by </span><a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <a href="https://github.com/gohugoio/hugo/releases/tag/v0.151.0" aria-label="Hugo 0.151.0" target="_blank" rel="noopener">v0.151.0</a> & <a href="https://github.com/foxihd/hugo-brewm" target="_blank" rel="noopener">hugo-brewm</a>.</div>
            </div>
        </div>
    </div>
                    <!-- history.html -->
                
                <!-- nav.html -->
<details class="presentation" aria-expanded="true" id="has-share" open>
    <summary id="share" tabindex="-1">
        <span>Share</span>
    </summary>
        <nav aria-labelledby="share">
            <ul role="presentation" class="share srm">
                    <!-- share.html -->
    <li id="has-mastodon">
        <!-- mastodon.html -->
    <form class="form" id="mastodon" action="//sharetomastodon.github.io/" target="_blank" rel="noopener noreferrer">
        <input id="mastodonTitle" type="hidden" name="title" value="Distributed System Blog 01 â€“ Exactly-Once RPC">
        <input id="mastodonPermalink" type="hidden" name="url" value="http://localhost:1313/zh/distributed_systems/blog1/">
        <input id="mastodonText" type="hidden" name="text" value="Distributed System Blog 01 â€“ Exactly-Once RPC http://localhost:1313/zh/distributed_systems/blog1/" disabled>
        <input id="mastodonInstance" type="url" class="ldots form__input" placeholder="Enter Mastodon instance (https://www.example.com)" aria-label="Mastodon instance URL">
        <button class="form__button" type="submit" aria-label="Share on Mastodon">
            <i class="icon mastodon sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Mastodon</span>
        </button>
    </form>
    </li>
    <li>
        <a href="mailto:?subject=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&body=http%3a%2f%2flocalhost%3a1313%2fzh%2fdistributed_systems%2fblog1%2f" role="button" aria-label="Share on Email">
            <i class="email sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Email</span>
        </a>
    </li>
    <li>
        <a href="whatsapp://send?text=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC%20http%3a%2f%2flocalhost%3a1313%2fzh%2fdistributed_systems%2fblog1%2f" role="button" aria-label="Share on Whatsapp">
            <i class="whatsapp sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Whatsapp</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://telegram.me/share/url?text=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;url=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Telegram in new tab">
            <i class="telegram sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Telegram</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://bsky.app/intent/compose?text=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;url=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Bluesky in new tab">
            <i class="bluesky sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Bluesky</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://facebook.com/sharer/sharer.php?u=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Facebook in new tab">
            <i class="facebook sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Facebook</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://news.ycombinator.com/submitlink?u=http://localhost:1313/zh/distributed_systems/blog1/&amp;t=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC" role="button"
            aria-label="Share on Hackernews in new tab">
            <i class="hackernews sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Hackernews</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://localhost:1313/zh/distributed_systems/blog1/&amp;title=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;summary=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;source=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Linkedin in new tab">
            <i class="linkedin sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Linkedin</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://pinterest.com/pin/create/button/?url=http://localhost:1313/zh/distributed_systems/blog1/&amp;media=http://localhost:1313/zh/distributed_systems/blog1/&amp;description=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC" role="button"
            aria-label="Share on Pinterest in new tab">
            <i class="pinterest sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Pinterest</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://reddit.com/submit/?url=http://localhost:1313/zh/distributed_systems/blog1/&amp;resubmit=true&amp;title=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC" role="button"
            aria-label="Share on Reddit in new tab">
            <i class="reddit sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Reddit</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;caption=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;content=http://localhost:1313/zh/distributed_systems/blog1/&amp;canonicalUrl=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Tumblr in new tab">
            <i class="tumblr sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Tumblr</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://threads.net/intent/post?text=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;url=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Threads in new tab">
            <i class="threads sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Threads</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://twitter.com/intent/tweet/?text=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC&amp;url=http://localhost:1313/zh/distributed_systems/blog1/" role="button"
            aria-label="Share on Twitter in new tab">
            <i class="twitter sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Twitter</span>
        </a>
    </li>
    <li>
        <a rel="noopener noreferrer" target="_blank" href="https://www.xing.com/app/user?op=share;url=http://localhost:1313/zh/distributed_systems/blog1/;title=Distributed%20System%20Blog%2001%20%e2%80%93%20Exactly-Once%20RPC" role="button"
            aria-label="Share on Xing in new tab">
            <i class="xing sri" aria-hidden="true"></i>
            <span class="t srt" role="tooltip">Share on Xing</span>
        </a>
    </li>
            </ul>
        </nav>
</details>
        </div>
        
            
    </div>
        <!-- main/footer.html -->
    <hr class="hide">
    <footer id="main-footer">
            <div id="unified-footer"><p id="license">Â© MUKIMASTA 2026</p>
                    <!-- menu.html -->
                        <p id="coffee-counter">Made with â¤ï¸ and 5 cups of coffee, if not more.</p>
            </div>
    </footer>
        </div>
    </main>
    <!-- footer.html -->
<footer id="body-footer" class="pagewidth">
    <div id="background-footer" class="background hide" role="presentation" aria-hidden="true"></div>
    <div id="focusMode"></div>
    <!-- a11y.html --><details id="has-a11y" class="presentation js-details hide" name="on-deck" aria-haspopup="true" aria-labelledby="has-a11y-summary"
    data-i18n-accessibility="Accessibility"
    data-i18n-optimizeSR="Screen Reader Optimization"
    data-i18n-optimizeSRdesc="Optimize display and resources for screen reader users who navigate with a pointer device."
    data-i18n-colorSettings="Color Settings"
    data-i18n-darkMode="Dark Mode"
    data-i18n-light="Light"
    data-i18n-dark="Dark"
    data-i18n-contrast="Contrast"
    data-i18n-lessContrast="Low"
    data-i18n-moreContrast="High"
    data-i18n-defaultContrast="Default"
    data-i18n-colorPalette="Color Palette"
    data-i18n-defaultColor="Default"
    data-i18n-deuteranopia="Deuteranopia"
    data-i18n-protanopia="Protanopia"
    data-i18n-tritanopia="Tritanopia"
    data-i18n-monochrome="Monochrome"
    data-i18n-fontSize="Font Size"
    data-i18n-baselineStretch="Baseline Stretch"
    data-i18n-OpenDyslexic="Use OpenDyslexic Font"
    data-i18n-menuControls="Accessibility Menu Controls"
    data-i18n-save="Save"
    data-i18n-reset="Reset"
    data-i18n-close="Close"
    data-i18n-bionRead="BionRead Mode"
    data-i18n-focusMode="Focus Mode"
    data-i18n-noLocalStorage="LocalStorage is not available in your browser. Settings won&#39;t be saved.">
</details>


    <div id="useBionRead" class="sri"></div>
    <!-- [top] bypass block -->
    <nav aria-label="Bypass">
        <a id="to-top" class="srm" href="#top" title="To Content Top" accesskey="c" aria-keyshortcuts="c" aria-label="To Content Top">
            <span class="t srt">To Content Top</span>
            <kbd class="key" aria-hidden="true" data-key="c"></kbd>
        </a>
    </nav>
</footer>
    
    <!-- [post] single.html -->
    <div id="bionReadSnapshot" hidden></div>
    <!-- [background] baseof.html -->
    <div id="background-body" role="presentation" aria-hidden="true"></div>

    
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches ||
                           document.body.getAttribute('data-theme') === 'dark';
            
            
            mermaid.initialize({
                startOnLoad: false,
                theme: isDark ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                }
            });
            
            
            document.querySelectorAll('code.language-mermaid').forEach(function(codeBlock) {
                const preBlock = codeBlock.parentNode;
                const container = document.createElement('div');
                container.className = 'mermaid';
                container.textContent = codeBlock.textContent;
                preBlock.parentNode.replaceChild(container, preBlock);
            });
            
            
            mermaid.run();
        });
    </script>
</body>
</html>
